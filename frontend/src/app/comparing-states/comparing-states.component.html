<div class="comparing-container">
  <h1>Comparar Produção por Estados</h1>

  <div class="filters">
    <div class="filter-card">
      <label for="ano">Ano</label>
      <input
        id="ano"
        type="number"
        [(ngModel)]="selectedAno"
        placeholder="Ex: 2020"
        min="1974"
        max="2023"
        (change)="fetchProducts()"
      />
    </div>

    <div class="filter-card">
      <label for="produto">Produto</label>
      <select
        id="produto"
        [(ngModel)]="selectedProduto"
        (change)="onProdutoSelecionado()"
      >
        <option *ngFor="let produto of produtos" [value]="produto.produto">
          {{ produto.produto }}
        </option>
      </select>
    </div>

    <div class="filter-card">
      <label for="ufs">UFs</label>
      <select
        id="ufs"
        [(ngModel)]="selectedUFs"
        multiple
        size="5"
      >
        <option *ngFor="let uf of ufsFiltradas" [value]="uf">
          {{ uf }}
        </option>
      </select>
    </div>

    <div class="filter-card">
      <button
        class="btn"
        (click)="compare()"
        [disabled]="loadingCompare"
      >
        {{ loadingCompare ? 'Carregando...' : 'Comparar' }}
      </button>
    </div>
  </div>

  <div *ngIf="comparison.length > 0">
    <div echarts [options]="chartOptions" class="chart"></div>
  </div>

  <div
    *ngIf="!loadingCompare && comparison.length === 0 && selectedUFs.length > 0"
    class="loading"
  >
    Nenhum dado encontrado para comparação.
  </div>
</div>
